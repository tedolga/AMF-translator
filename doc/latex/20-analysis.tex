\chapter{Анализ существующих решений}

В этом разделе выполнены следующие работы: анализ существующих решений в области
автоматизации тестирования, сравнительная оценка вариантов возможных решений, выбор
наиболее оптимального средства автоматизации.

\section{Формулировка критериев выбора}
 
На сегодняшний день существует ряд различных программных комплексов, предоставляющих
возможность для проведения функционального, нагрузочного, регрессионного 
тестирования Flex приложений, поэтому для решения поставленной на дипломный
проект задачи нет необходимсти создавать тестовую утилиту с нуля, разумнее 
будет выбрать одно из существующих решений, и,в случае, если оно не полностью 
удовлетворяет нашим условиям, доработать его. Чтобы выбрать из предложенного 
разнообразия подходящий продукт, сформулируем ряд требований, 
которым должна удовлетворять выбранная нами тестовая утилита.

\begin{enumerate}
\item Возможность проведения нагрузочных тестов. Так как большинство 
web-приложений являются многопользовательскими, проведение нагрузочных
тестов является обязательным условием качественного тестирования. Поскольку
запуск тестов в несколько потоков является довольно сложной задачей, 
инструмент для автоматизации должен обеспечивать удобный и надёжный способ 
многопоточного прогона тестовых сценариев.
\item Поддержка протокола AMF. Утилита должна осуществлять тестирование
взаимодействия Flex приложения с сервером, предоставляя пользователю возможность 
наблюдать трафик. Тестирование пользовательского интерфейса для нашей 
задачи нецелесообразно.
\item Простота создания тестовых сценариев. Утилита должна предоставлять 
пользователю удобных механизм записи и редактирования тестов.
такими как maven и ant, и серверами интеграционного тестирования. Это условие
\item Возможность запуска тестов из командной строки. Данная возможность позволяет
выполнять тесты в автоматическом режиме в системах непрерывной интеграции, что
является необходимостью, особенно в тех случаях, когда над разными частями
тестируемой системы разработчики трудятся независимо и необходимо 
выполнении частых автоматизированных сборок проекта для скорейшего 
выявления и решения интеграционных проблем. Часто производители тестовых 
фреймворков предоставляют свои продукты для проведения интеграционного тестирования, однако 
зачастую они узко заточены под конкретный круг задач, поэтому нас будет интересовать 
возможность запуска тестов на таких инструментах интеграции, как Jenkins и  
Hudson, которые на данный момент широко распротранены и имеют множество плагинов, позволяющих
значительно расширить их существующую функциональность.    
\item Кроссплатформенность. Выбранная нами тестовая утилита должна работать
под управлением различных операционных систем.
\item Условия распростронения продукта. В идеале программное обеспечение должно быть
бесплатным и иметь открытый исходный код с возможность создания собственных расширений,
это является одним из основных критериев отбора, так как тестировщики и разработчики
всегда должны иметь возможность доработки и усовершенствования существующего функционала
тестового фреймворка, чтобы адаптировать его под специфику работы тестируемого ими приложения.
\item Документация. Так как современные инструменты тестирования не менее сложны, чем среды
разработки, большим плюсом будет наличие подробной пользовательской документации,
документации для разработчиков, различных форумов и сайтов, посвящённых данному инструменту
тестирования.
\end{enumerate}

\section{Обзор утилит для тестирования Flex приложений}

\subsection{HP QuickTest Professional}

HP QuickTest Professional (QTP) — один из инструментов автоматизации 
функционального тестирования, является флагманским продуктом компании 
HP в своей линейке. Для разработки автоматизированных тестов QTP 
использует язык VBScript(Visual Basic Scripting Edition ) — скриптовый 
язык программирования, интерпретируемый компонентом Windows Script Host.
Он широко используется при создании скриптов в операционных системах
семейства Microsoft Windows. QTP поддерживает ряд технологий, среди
которых есть и Macromedia Flex. Поддержка Flex осуществляется засчёт
установки плагина, предоставляемого компанией Adobe (Flex QTP add-in).

Чтобы приступить к тестированию приложение необходимо скомпилировать, 
создав для него HTML-оболочку, и развернуть его либо локально, либо на 
web-сервере. Создание тестов в QTP осуществляется следующим образом:
приложение открывается в браузере и все действия, совершаемые пользователем с 
пользовательским интерфейсом приложения записываются в виде строчек Visual Basic скрипта. 
QTP поддерживает запись большинства наиболее часто используемых во Flex 
приложениях событий (операций), связанных с пользовательским интерфейсом. 
Однако часть из них, например некоторые атомарные операции, игнорируются 
во время записи тестов. Пользователь имеет возможность добавить их в 
текст скрипта вручную. Для проверки правильности выполнения теста 
пользователь задаёт ожидаемые значения для выполняемых операций ---
checkpoints. Во время автоматического прогона тестов запускать браузер 
уже не нужно, достаточно лишь указать HTML страницу, используемую для 
тестов. Для выявления причины возникновения ошибок в тестах или каких-либо 
других неполадок можно обратиться к логам Flash Player или настроить и 
включить логирование в QTP. Возможность прогона тестов в несколько потоков
в QTP отсутствует

Для проведения тестов с HP QuickTest Professional необходимо использовать
 браузер Internet Explorer версии 6 или выше. HP QuickTest Professional 
работает с операционными системами семейства Windows и является платным 
программным обеспечением.

\subsection{IBM Rational Functional Tester}

IBM Rational Functional Tester является средством автоматизированного 
регрессивного тестирования, предназначенным для тестирования Java, .NET, 
Web-приложений, включая Flex-приложения, и терминальных приложений на 
платформах Windows и Linux. Functional Tester поддерживает два языка 
сценариев: Java и Visual Basic.NET. Для тестирования Java-приложений в 
программу Functional Tester включена открытая среда разработки Eclipse. 
Установка дополнительных компонентов не требуется. Если требуется 
использовать язык сценариев Visual Basic.NET, перед установкой IBM 
Rational Functional Tester необходимо установить Visual Studio.NET.

Перед началом тестирования приложение загружается в браузере, затем все 
действия,совершаемые пользователем записываются в виде Java или Visual 
Basic.NET скрипта (в зависимости от настроек). Пользователь может 
редактировать скрипты, а также задавать ожидаемые результаты выполнения 
той или иной операции для проверки работы приложения. Как и QTP, IBM 
Rational Functional Tester во время записи тестов добавляет компоненты 
приложения в свой набор объектов. Далее тесты можно запускать в 
автоматическом режиме. Также в IBM Rational Functional Tester имеется 
возможность многократного запуска тестов с различным набором данных. 
Если стандартного набора объектов(таких как кнопки, текстовые поля и т.д.) 
недостаточно, существует возможность самостоятельно добавить во фреймворк 
необходимые объекты. Это возможно благодаря Rational Functional Tester 
proxy software development kit (SDK), который имеет удобное API и 
довольно подробную сопроводительную документацию.
Также IBM Rational Functional Tester упрощает механизм регрессионного 
тестирования. Functional Tester использует усовершенствованную технологию 
ScriptAssure для того, чтобы «изучить» контрольные характеристики 
пользовательского интерфейса, что позволяет идентифицировать те же самые 
средства управления в новой версии, несмотря на внесенные изменения. 
Эти характеристики сохраняются в объектной карте, совместный доступ к 
которой могут получить различные скрипты и участники проекта. 
Благодаря этой карте изменения, внесенные в характеристики распознавания 
объекта, будут отражены во всех скриптах тестирования, что существенно 
упрощает обслуживание. 

Rational Functional Tester поддерживает операционные системы Windows 
2000, XP, Vista, 7, Linux. Является платным программным обеспечением.

\subsection{NeoLoad}

NeoLoad --- профессиональный инструмент нагрузочного тестирования веб-приложений,
в том числе и Flex, работающий на многих платформах, в том числе Windows, Solaris, Linux.
Осуществляя моделирование большого числа пользователей, которые обращаются 
к приложению, NeoLoad делает проверку надежности и производительности 
приложения при разных нагрузках.

Тестирование Flex приложений осуществляется засчёт записи AMF трафика во 
время взаимодействия пользователя с приложением. Все перехваченные запросы 
отображаются в xml формате, что позволяет редактировать содержащиеся в них 
данные. Далее записанные тесты могут быть запущены в несколько потоков.

NeoLoad является платным программным обеспечением с закрытым исходным кодом. 
 
\subsection{Apache JMeter}

JMeter --- инструмент для проведения нагрузочного тестирования, изначально
разрабатывался как средство тестирования web-приложений, в настоящее время 
он способен проводить нагрузочные тесты для JDBC-соединений, FTP, LDAP, SOAP, 
JMS, POP3, IMAP, HTTP и TCP. 
В JMeter реализованы возможность создания большого количества запросов с 
помощью нескольких компьютеров при управлении этим процессом с одного из них,
логирование результатов тестов и разнообразная визуализация результатов в
виде диаграмм, таблиц и т. п.

Ключевое понятие в JMeter –-- план тестирования. План тестирования приложения
представляет собой описание последовательности шагов, которые
будет исполнять JMeter. План тестирования может содержать:

\begin{enumerate}
\item Группы потоков (Thread Groups) --- элемент, позволяющий конфигурировать
многопоточный запуск тестов
\item Контроллеры --- позволяют создаватьтесты со сложной логической структурой.
\item Слушатели --- отображают результаты выполнения тестов
\item Соответствия --- позволяют сравнивать полученные результаты с
ожиданиями пользователя
\item Сэмплеры --- основные элемнты тест-плана, в которых формируется тело
запроса, тестовый шаг.
\end{enumerate}

На данный момент в JMeter нет отдельных средств для тестирования Flex приложений, 
однако есть возможность записи http запросов, содержащих в себе тело AMF 
сообщения, с помощью прокси-сервера. Далее перехваченные запросы могут быть 
перенесены в план тестирования и запущены в режиме нагрузочного тестирования. 
Созданные в JMeter тесты могут быть запущены с помощью систем сборок проектов Maven и 
Ant. Также JMeter свободно интегрируется со многими серверами сборок, такими как Jenkins 
и Hudson.

JMeter является бесплатным кросс-платформенным Java-приложением с открытым
исходным кодом и удобным API. Существует большое количество плагинов к JMeter, 
значительно расщиряющих его базовую функциональность.

\section{Итоги}

В предыдущем разделе был рассмотрен ряд инструментов для тестировани Flex приложений.
Для наглядности и простоты анализа все исследованные продукты были собраны в таблицу и 
охарактеризованы по следующему набору критериев:

\begin{enumerate}
\item Возможность проведения нагрузочных тестов; 
\item Поддержка протокола AMF.
\item Простота создания тестовых сценариев.
\item Возможность запуска тестов из командной строки.
\item Кроссплатформенность;
\item Условия распростронения продукта;
\item Документация.
\end{enumerate}

Для каждого критерия (в таблице указаны их номера), была дана оценка по пятибальной шкале, 
характеризующая степень того, в какой мере тот или иной продукт удовлетворяет данному критерию.

\begin{table}[ht]
\caption{Таблица сравнительного анализа тестовых утилит}
\begin{tabular}{|c|c|c|c|c|c|c|c|}
\hline 
Инструмент тестирования & 1 & 2 & 3 & 4 & 5 & 6 & 7\\
\hline 
HP QuickTest Professional & 2 & 0 & 3 & 4 & 0 & 1 & 4\\
\hline 
IBM Rational Functional Tester & 2 & 0 & 4 & 3 & 5 & 1 & 4\\
\hline 
NeoLoad & 5 & 5 & 4 & 4 & 5 & 1 & 3\\
\hline 
Apache JMeter & 5 & 3 & 4 & 5 & 5 & 5 & 4\\
\hline
\end{tabular} 
\label{tab:tabular}
\end{table}

Из таблицы видно, что по обозначенным критериям наиболее подходящим для 
решения поставленной задачи является инструмент тестирования Apache JMeter, решающим
фактором стало условие распространения продукта с открытым исходным кодом, а также его популярность.
Для того, чтобы JMeter мог обеспечивать полную поддержку тестирования Flex приложений, необходимо
будет расширить его фунционал, добавив отображение AMF сообщений в понятной пользователю 
форме и возможность запуска тестов в несколько потоков без дублирования сессий с сервером.